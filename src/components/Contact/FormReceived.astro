---
import Title from "@components/Title/Title.astro";
import type { WeddingFormData } from "@config/cookies.json";
import { COOKIES } from "@constants/cookies";

const cookieData = Astro.cookies.get(COOKIES.WEDDING_FORM);
let formData: WeddingFormData | null = null;

if (cookieData?.value) {
	try {
		formData = JSON.parse(cookieData.value) as WeddingFormData;
	} catch (error) {
		console.error("Error parsing cookie data:", error);
	}
}
---

{
	formData && (
		<div class="mx-auto max-w-2xl">
			<Title title="Todo listo para el despegue" />

			<div class="mt-8 overflow-hidden rounded-lg bg-white shadow-lg">
				{/* <!-- Ticket Header --> */}
				<div class="bg-primary p-6">
					<h2 class="text-2xl font-bold">TARJETA DE EMBARQUE</h2>
					<p class="text-sm opacity-75">Nuria & Cristian Airlines</p>
				</div>

				{/* <!-- Ticket Body --> */}
				<div class="space-y-6 p-6">
					{/* <!-- Flight Info --> */}
					<div class="flex items-center justify-between border-t border-b border-dashed py-4">
						<div>
							<p class="text-sm text-gray-500">DE</p>
							<p class="text-lg font-bold">SOLTERO</p>
						</div>
						<div class="flex-1 px-8">
							<div class="flex items-center justify-center">
								<span class="text-primary">‚úà</span>
								<div class="mx-4 h-px flex-1 bg-gray-300" />
								<span class="text-primary">üíë</span>
							</div>
						</div>
						<div class="text-right">
							<p class="text-sm text-gray-500">A</p>
							<p class="text-lg font-bold">CASADO</p>
						</div>
					</div>

					{/* <!-- Passenger Info --> */}
					<div class="flex items-start justify-between">
						<div>
							<p class="text-sm text-gray-500">NOMBRE PASAJERO</p>
							<p class="text-lg font-bold">{formData.name}</p>
						</div>
						<div class="text-right">
							<p class="text-sm text-gray-500">ASIENTO</p>
							<p class="text-lg font-bold">‚ù§Ô∏è</p>
						</div>
					</div>

					{/* <!-- Additional Info --> */}
					<div class="grid grid-cols-2 gap-6">
						<div>
							<p class="text-sm text-gray-500">FECHA DEL VUELO</p>
							<p class="text-lg font-bold">08 JUN 2025</p>
						</div>
						<div>
							<p class="text-sm text-gray-500">N¬∫ PASAJEROS</p>
							<p class="text-lg font-bold">{formData.asistentes}</p>
						</div>
						<div>
							<p class="text-sm text-gray-500">TEL√âFONO</p>
							<p class="text-lg font-bold">{formData.telefono}</p>
						</div>
						<div>
							<p class="text-sm text-gray-500">EMAIL</p>
							<p class="truncate text-lg font-bold">{formData.email}</p>
						</div>
					</div>

					{(formData.hasVegans === "yes" || formData.hasAllergies === "yes") && (
						<div class="mt-4 rounded-lg bg-gray-50 p-4">
							<p class="mb-2 text-sm text-gray-500">REQUERIMIENTOS ESPECIALES</p>
							{formData.hasVegans === "yes" && (
								<p class="text-sm">ü•ó {formData.vegans} men√∫(s) veganos</p>
							)}
							{formData.hasAllergies === "yes" && (
								<p class="text-sm">‚ö†Ô∏è Alergias: {formData.allergies}</p>
							)}
						</div>
					)}

					{/* <!-- Barcode --> */}
					<div class="border-t border-dashed pt-6">
						<div class="flex justify-center">
							<div class="text-center">
								<p class="mb-2 text-xs text-gray-500">C√ìDIGO DE EMBARQUE</p>
								<p class="font-mono text-lg">‚úà NC-0806-2025 ‚úà</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	)
}
